<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@100;300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <meta name="theme-color" content="#ff00ff"/>
    <link rel="icon" sizes="512x512" href="/img/icone.png">
    <link rel="manifest" href="/manifest.json">
    <!-- reuse same icon for Safari -->
    <link rel="apple-touch-icon" href="/img/icone.png">

    <!-- multiple icons for IE -->
    <meta name="msapplication-square310x310logo" content="/img/icone.png">
    <link rel="apple-touch-icon" href="/img/icone.png">
    <meta name="msapplication-square70x70logo" content="/img/icone.png">
    <meta name="msapplication-square150x150logo" content="/img/icone.png">
    <meta name="msapplication-wide310x150logo" content="/img/icone.png">
    <title>Météo</title>
</head>
<body>
    <button id="btnAdd" class="btn btn-primary d-none">Installer la PWA</button>
 <div class="container-fluid">
     
     <div class="recherche">
        <button id="refresh" class="btn">Home</button>
    <input type="text" id="ville">
    <button id="go"class="btn btn-primary">Go</button>
    
    </div>
        
    <h1 id ="lieu"></h1>

    <div class="row">
        <div class="col-12 day">
            <img src="" alt="icone">
            <h2></h2>
            <div class="date"></div>
            <div class="temperature"></div>
        </div>

        

        <div class="col-12 day1 joursuivant">
            <div class="row">
            <div class="date col-4"></div>
            <div class="col-3">
            <p class="condition"></p>
            </div>
            <div class="col-3 texte">
            <p class="temperaturemax"></p>
            <p class="temperaturemin"></p>
            </div>
            <img src="" alt="icone" id="imgjs">
            </div>
        </div>

        <div class="col-12 day2 joursuivant">
            <div class="row">
            <div class="date col-4"></div>
            <div class="col-3">
            <p class="condition"></p>
            </div>
            <div class="col-3 texte">
            <p class="temperaturemax"></p>
            <p class="temperaturemin"></p>
            </div>
            <img src="" alt="icone" id="imgjs">
            </div>
        </div>

        <div class="col-12 day3 joursuivant">
            <div class="row">
            <div class="date col-4"></div>
            <div class="col-3">
            <p class="condition"></p>
            </div>
            <div class="col-3 texte">
            <p class="temperaturemax"></p>
            <p class="temperaturemin"></p>
            </div>
            <img src="" alt="icone" id="imgjs">
            </div>
        </div>

        <div class="col-12 day4 joursuivant">
            <div class="row">
            <div class="date col-4"></div>
            <div class="col-3">
            <p class="condition"></p>
            </div>
            <div class="col-3 texte">
            <p class="temperaturemax"></p>
            <p class="temperaturemin"></p>
            </div>
            <img src="" alt="icone" id="imgjs">
            </div>
        </div>
       
    </div>
 </div>

<script src="js/jquery-3.5.1.min.js"></script>    
<script src="js/scripts.js"></script>
<script>
    if('serviceWorker' in navigator) {
      navigator.serviceWorker
               .register('/sw.js')
               .then(function() { console.log("Service Worker Registered"); });
    }


    // fonction qui check si appli installable
    window.addEventListener('beforeinstallprompt', (e) => {
        console.log("beforeinstallprompt");
    // Stash the event so it can be triggered later.
    deferredPrompt = e;
    // Update UI notify the user they can add to home screen
    showInstallPromotion();

});

function  showInstallPromotion() {
  //  alert("ok on peut installer");

   $('#btnAdd').removeClass('d-none');

}

var btnAdd = document.getElementById("btnAdd");

btnAdd.addEventListener('click', (e) => {
  // hide our user interface that shows our A2HS button
  btnAdd.style.display = 'none';
  // Show the prompt
  deferredPrompt.prompt();
  // Wait for the user to respond to the prompt
  deferredPrompt.userChoice
    .then((choiceResult) => {
      if (choiceResult.outcome === 'accepted') {
        console.log('User accepted the A2HS prompt');
      } else {
        console.log('User dismissed the A2HS prompt');
      }
      deferredPrompt = null;
    });
});
   
     </script>
</body>
</html>